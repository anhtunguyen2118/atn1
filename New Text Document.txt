let stopFlag = false; // Cá» Ä‘á»ƒ dá»«ng tool

async function findAndClickPaymentButton() {
    while (!stopFlag) {
        try {
            // TÃ¬m nÃºt "TÃ´i muá»‘n thanh toÃ¡n"
            const paymentButton = Array.from(document.querySelectorAll('a'))
                .find(btn => btn.textContent.includes("TÃ´i muá»‘n thanh toÃ¡n lá»‡nh nÃ y"));

            if (paymentButton) {
                paymentButton.click();
                console.log("âœ… ÄÃ£ click vÃ o nÃºt 'TÃ´i muá»‘n thanh toÃ¡n lá»‡nh nÃ y'");

                await new Promise(resolve => setTimeout(resolve, 300));

                // MÃ´ phá»ng nháº¥n Enter
                const enterEvent = new KeyboardEvent('keydown', { key: 'Enter', keyCode: 13, bubbles: true });
                document.activeElement.dispatchEvent(enterEvent);
                console.log("âœ… ÄÃ£ nháº¥n Enter");

                await new Promise(resolve => setTimeout(resolve, 4000));

                // TÃ¬m vÃ  click vÃ o nÃºt dáº¥u "X"
                const closeButton = document.querySelector('.btn-icon._BrowserHeaderButton_m63td_65');
                if (closeButton) {
                    closeButton.click();
                    console.log("âœ… ÄÃ£ click vÃ o dáº¥u X Ä‘á»ƒ Ä‘Ã³ng.");

                    // Táº¡m dá»«ng 10 giÃ¢y trÆ°á»›c khi tiáº¿p tá»¥c
                    console.log("â¸ï¸ Äang táº¡m dá»«ng 10 giÃ¢y...");
                    await new Promise(resolve => setTimeout(resolve, 4000));

                } else {
                    console.log("â— KhÃ´ng tÃ¬m tháº¥y dáº¥u X, tiáº¿p tá»¥c vÃ²ng láº·p...");
                }

            } else {
                console.log("â— ChÆ°a phÃ¡t hiá»‡n nÃºt 'TÃ´i muá»‘n thanh toÃ¡n lá»‡nh nÃ y', tiáº¿p tá»¥c kiá»ƒm tra...");
                await new Promise(resolve => setTimeout(resolve, 1000)); // Chá» 1 giÃ¢y trÆ°á»›c khi kiá»ƒm tra láº¡i
            }
        } catch (e) {
            console.error(`âŒ Lá»—i xáº£y ra: ${e}`);
        }
    }
}

// Dá»«ng tool
function stopTool() {
    stopFlag = true;
    console.log("ğŸ›‘ Tool Ä‘Ã£ dá»«ng.");
}

// Báº¯t Ä‘áº§u tool
findAndClickPaymentButton();
